<div class="section">
  <h3>Manejo básico de excepciones</h3>
  <p>Usa <code>try/except</code> para capturar errores esperados.</p>
  <p>Coloca únicamente el código que podría fallar dentro del bloque <code>try</code> para evitar atrapar excepciones ajenas. Maneja casos específicos antes de usar un <code>except Exception</code> general.</p>
  <pre><code class="language-python">try:
    x = int(input("número: "))
    print(10 / x)
except ValueError:
    print("debes ingresar un entero")
except ZeroDivisionError:
    print("no dividir entre cero")
</code></pre>
  <p><strong>Ejercicio:</strong> pide un número y vuelve a intentarlo hasta que sea válido (maneja excepciones).</p>
  <details class="solution"><summary>Mostrar solución</summary>
    <pre><code class="language-python">while True:
    try:
        x = int(input('número: '))
        break
    except ValueError:
        print('intenta otra vez')
print(x)
</code></pre>
  </details>
  <button class="ask-btn">Preguntar al asistente</button>
  <div class="question-box"></div>
</div>

<div class="section">
  <h3>else y finally</h3>
  <p><code>else</code> corre si no hubo excepción; <code>finally</code> corre siempre.</p>
  <p>Utiliza <code>else</code> para ejecutar lógica que depende del éxito del bloque principal. <code>finally</code> es ideal para liberar recursos, cerrar archivos o conexiones.</p>
  <pre><code class="language-python">f = None
try:
    f = open("datos.txt", "r", encoding="utf-8")
except FileNotFoundError:
    print("no existe")
else:
    print("leído ok")
finally:
    if f: f.close()
</code></pre>
  <p><strong>Ejercicio:</strong> usa <code>with</code> para evitar el <code>finally</code> y maneja el error igualmente.</p>
  <details class="solution"><summary>Mostrar solución</summary>
    <pre><code class="language-python">try:
    with open('datos.txt','r',encoding='utf-8') as f:
        print(f.readline())
except FileNotFoundError:
    print('no existe')
</code></pre>
  </details>
  <button class="ask-btn">Preguntar al asistente</button>
  <div class="question-box"></div>
</div>

<div class="section">
  <h3>Excepciones personalizadas</h3>
  <p>Define tus propias excepciones para casos de negocio.</p>
  <p>Las excepciones personalizadas heredan de <code>Exception</code> (o una subclase). Añade mensajes claros y considera implementar atributos adicionales si necesitas transportar más contexto.</p>
  <pre><code class="language-python">class EdadInvalida(Exception):
    pass

def set_edad(e):
    if not 0 &lt;= e &lt;= 120:
        raise EdadInvalida("edad fuera de rango")

try:
    set_edad(200)
except EdadInvalida as ex:
    print("Error:", ex)
</code></pre>
  <p><strong>Ejercicio:</strong> crea una excepción para validar códigos de producto (prefijo + dígitos) y úsala.</p>
  <details class="solution"><summary>Mostrar solución</summary>
    <pre><code class="language-python">import re
class CodigoInvalido(Exception):
    pass

def validar(c):
    if not re.fullmatch(r'[A-Z]{3}\d{4}', c):
        raise CodigoInvalido('formato inválido')

try:
    validar('ABC1234')
    print('ok')
except CodigoInvalido as e:
    print(e)
</code></pre>
  </details>
  <button class="ask-btn">Preguntar al asistente</button>
  <div class="question-box"></div>
</div>

